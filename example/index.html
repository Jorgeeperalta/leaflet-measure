<!doctype HTML>
<html>
<head>
  <meta charset="utf-8">
  <!-- <title>leaflet-measure</title> -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
  <link rel="stylesheet" href="leaflet-measure.css">
  <style>
    body {
      font-size: 14px;
      font-family: Helvetica, sans-serif;
      font-weight: 400;
      line-height: 1;
      color: #222;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
    }
    body {
      margin: 0 20px 20px;
    }
    h1, h2 {
      margin: 20px 0 0;
      font-size: 1.4em;
      font-weight: normal;
      line-height: 1;
    }
    h1 {
      display: inline-block;
      font-size: 1.4em;
    }
    h2 {
      font-size: 1.1em;
    }
    pre {
      line-height: 1.5em;
    }
    p.github {
      display: inline-block;
      margin: 20px 0 0 20px;
      font-size: 1.2em;
    }
    a, a:visited, a:hover, a:active, a:focus {
      text-decoration: none;
    }
    #map {
      height: 500px;
      margin: 20px 20px 0 0;
    }
  </style>
</head>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<body>
  
  <!-- <h1>leaflet-measure</h1> -->
  <!-- <p class="github"><a href="//github.com/ljagis/leaflet-measure">github.com/ljagis/leaflet-measure</a></p> -->
  <div id="map"></div>
  <div >
    <div class="col-md-6">

  <div class="form-group grupo-filtros" id="localidad">
    <label for="inplocalidad">Busca por localidad</label>
    <select name="inplocalidad" id="inplocalidad"  class="form-control ">
      <option value="">Seleccione una localidad</option>';
      <?php $db->llenarlista('pklocalidad','detalle','gis.localidad '); ?>						
    </select>
    <br>
      <label for="inplocalidad">Busca por Poste</label>
    <select name="inpposte" id="inpposte"  class="form-control ">
        <option value="" selected>Seleccione una Poste</option>';
         <option value="HIERRO GALVANIZADA NUEVA">HIERRO GALVANIZADA NUEVA</option>
          <option value="HIERRO VIEJA" >HIERRO VIEJA</option>
          <option value="MADERA">MADERA</option>	
          <option value="HORMIGON">HORMIGON</option>					
    </select>
    <br>
      <label for="inppotencia">Busca por Potencia</label>
    <select name="inppotencia" id="inppotencia"  class="form-control ">
        <option value="" selected>Seleccione una Potencia</option>';
         <option value="180">180W</option>
          <option value="120" >120W</option>
          <option value="60">60W</option>	
          <option value="Reflector">REFLECTOR</option>					
    </select>
    <br>
      <div class="col-lg-12">
    <button type="button" class="btn btn-primary btn-block pull-right" id="btnbuscar">Buscar</button>
  </div>
  </div>
    </div>
  </div>


  <h2><code>measurefinish</code> event data:</h2>
  <pre id="eventoutput">...</pre>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
  <script src="leaflet-measure.js"></script>
  <script>
    (function(L, document) {
      var map = L.map('map', {
        center: [-36.47457365461415, -56.747594146894095],
        zoom: 16,
        measureControl: true
      });
      L.tileLayer('//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        minZoom: 1,
        maxZoom: 18,
        attribution: '&copy; Esri &mdash; Sources: Esri, DigitalGlobe, Earthstar Geographics, CNES/Airbus DS, GeoEye, USDA FSA, USGS, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community'
      }).addTo(map);
     var polygon = L.polygon([
   -56.794767,-36.468371
    -56.796484,-36.469199
   -56.797428,-36.472029
    -56.798973,-36.472857 -56.799746,-36.474376 -56.799059,-36.47617
   -56.796913,-36.476377 -56.796141,-36.477274 -56.796312,-36.478379 -56.794252,-36.482036
   -56.792364,-36.481967 -56.789618,-36.483693 -56.789274,-36.485073 -56.791162,-36.488247
   -56.790991,-36.489696 -56.787815,-36.493216 -56.787643,-36.489834 -56.78318,-36.491421
   -56.780176,-36.493561 -56.778288,-36.495148 -56.770048,-36.497149 -56.763268,-36.497907
   -56.769876,-36.495217 -56.769962,-36.494734 -56.764297,-36.494596 -56.772108,-36.491973
   -56.766701,-36.490593 -56.768417,-36.488316 -56.774254,-36.486936 -56.772194,-36.484176
   -56.794767,-36.468371
	 ]).addTo(map);
	 var popup = L.popup();

	 function onMapClick(e) {
	 popup
	 .setLatLng(e.latlng)
	 .setContent("You clicked the map at " + e.latlng.toString())
	 .openOn(map);
	 };

	 map.on('click', onMapClick);
      map.on('measurefinish', function(evt) {

		//  evt ={
		//  "area": 18073023.321828768,
		//  "areaDisplay": "1 807.30 hectareas",
		//  "lastCoord": {
		//  "dd": {
		//  "x": -56.747422456563804,
		//  "y": -36.47457365461415
		//  },
		//  "dms": {
		//  "x": "56° 44' 50.72\" W",
		//  "y": "36° 28' 28.47\" S"
		//  }
		//  },
		//  "length": 18779.662633383246,
		//  "lengthDisplay": "18 780 metros",
		//  "pointCount": 10,
		//  "points": [
		//  {
		//  "lat": -36.47457365461415,
		//  "lng": -56.747594146894095
		//  },
		//  {
		//  "lat": -36.46822371589256,
		//  "lng": -56.75068457283956
		//  },
		//  {
		//  "lat": -36.466567124587556,
		//  "lng": -56.745362172600146
		//  },
		//  {
		//  "lat": -36.458835897115236,
		//  "lng": -56.80923097547318
		//  },
		//  {
		//  "lat": -36.472226998730356,
		//  "lng": -56.81266478207926
		//  },
		//  {
		//  "lat": -36.47264111963731,
		//  "lng": -56.80837252382168
		//  },
		//  {
		//  "lat": -36.48961817165565,
		//  "lng": -56.81386661439139
		//  },
		//  {
		//  "lat": -36.49431035905138,
		//  "lng": -56.751886405151694
		//  },
		//  {
		//  "lat": -36.476782207012114,
		//  "lng": -56.75034119217896
		//  },
		//  {
		//  "lat": -36.47457365461415,
		//  "lng": -56.747422456563804
		//  }
		//  ]
		//  };
        writeResults(evt);
      });

      function writeResults(results) {
        document.getElementById('eventoutput').innerHTML = JSON.stringify(
          {
            area: results.area,
            areaDisplay: results.areaDisplay,
            lastCoord: results.lastCoord,
            length: results.length,
            lengthDisplay: results.lengthDisplay,
            pointCount: results.pointCount,
            points: results.points
          },
          null,
          2
        );
      }
    })(window.L, window.document);
  </script>
</body>
</html>
<style type="text/css" media="screen">
	.icono_camaras{
		color:#f00;
	}
	.icono_datos{
		color:#000;
	}
	.cuadrado{
		height: 80px;
		width: 80px;
	}	

	.boton{
		height: 80px;
	}
	.seleccionado{
		border: 5px solid #000;
	}
</style>





